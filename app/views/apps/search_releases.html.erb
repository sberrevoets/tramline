<%= render ContainerComponent.new(title: "Search Tramline", subtitle: "Search through releases, commits, pull requests, and builds") do |container| %>
  <% container.with_body do %>
    <%= render SearchBarComponent.new do |search| %>
      <% search.with_text_field :search, params[:search_pattern], "eg. 1.0.0" %>
      <% search.with_clear_search %>

      <div class="text-xs text-secondary text-end">All timestamps are in the configured <code><%= @app.timezone %></code> timezone for the app</div>

      <%= render VerticalTabComponent.new(turbo_frame: "tab_content", sidebar_header: "Filter by", tab_config: @tab_configuration) do |container| %>
        <% container.with_tab do %>
          <%= search.with_search_form url: search_releases_app_path(@app, **@search_params) %>
          <%= render partial: "apps/search/all_releases_search_results",
                     locals: { releases: @releases, pagy: @pagy, all_releases_params: @search_params, app: @app, filters: @filters } %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>

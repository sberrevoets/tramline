<%= render TabbedContainerComponent.new(title: "Search",
                                        turbo_frame: "search_results",
                                        tab_config: @tab_configuration) do |container| %>
  <% container.with_back_button(to: "the app", path: app_path(@app)) %>

  <% container.with_sub_action do %>
    <%= render SearchBarComponent.new(
      path: search_app_url(@app, **@search_params),
      placeholder: "Search commit messages",
      value: params[:search_pattern],
      turbo_frame: "search_results",
      default_params: { resource: @resource }) %>
  <% end %>

  <% container.with_tab do %>
    <% if @resource == "releases" %>
      <%= render partial: "apps/all_releases_search_results", locals: { releases: @releases, pagy: @pagy, all_releases_params: @search_params, app: @app, filters: @filters } %>
    <% elsif @resource == "builds" %>
      <%= render partial: "apps/all_builds_search_results", locals: { builds: @builds, pagy: @pagy, all_builds_params: @search_params, app: @app, filters: @filters } %>
    <% end %>
  <% end %>
<% end %>
